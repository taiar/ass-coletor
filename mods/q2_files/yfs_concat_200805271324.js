// Concatenated on Tue May 27 13:24:48 PDT 2008 by joyd. Contains files: yfi_cookie_1.2.js, yfs_1.11.js, yfs_backend_1.36.js, yfs_frontend_1.106.js, yfs_util_1.34.js, 
YAHOO.namespace("YAHOO.Finance");if(!YAHOO.Finance.Cookie){YAHOO.Finance.Cookie={jar:{},get:function(A){if(this.jar[A]){return this.jar[A].value}var C="",D=" "+document.cookie+";",B=D.indexOf((" "+A+"="));if(B>=0){B+=A.length+2;C=unescape(D.substring(B,D.indexOf(";",B)));this.jar[A]={value:C};return C}else{return false}},getObj:function(C){if(this.jar[C]&&this.jar[C].obj){return this.jar[C].obj}var F=this.get(C);if(F===false){return null}var A=F.split("&"),G={},E,B;for(var D=A.length-1;D>-1;D--){B=A[D].indexOf("=");if(B===-1){G[A[D]]=""}else{G[A[D].substr(0,B)]=A[D].substr(B+1)}}this.jar[C].obj=G;return G},set:function(B,F,I,C,J,A){if(!B){return false}if(!C){C=".finance.yahoo.com"}if(!J){J="/"}if(!I){I=0}this.jar[B]={};if(typeof (F)==="object"){var H=F;F=[];for(var D in H){F[F.length]=(D+"="+escape(H[D]))}F=F.join("&");this.jar[B].obj=H}var E=new Date();if(I){E.setTime(E.getTime()+I*1000*60*60*24)}var G=B+"="+F+";expires="+E.toGMTString()+";path="+J+";domain="+C+(A?";secure":"");document.cookie=G;this.jar[B]["value"]=F;return true},remove:function(A){this.set(A,"",-1);this.jar[A]=null}}}if(typeof (YAHOO.Finance)=="undefined"||typeof (YAHOO.Finance.Streaming)=="undefined"){YAHOO.namespace("YAHOO.Finance.Streaming")}var YFS=YAHOO.Finance.Streaming;YFS.init=function(){YFS.util.init();YFS.params.init();YFS.markettime.init();YFS.portfolio.init();YFS.frontend.init();YFS.events.init();YFS.vcr.init()};YAHOO.Finance.Streaming.DataCache=function(){var A={};this.get=function(C,B){if(A[C]){return A[C][B]}return null};this.put=function(D,C,B){if(!A[D]){A[D]={}}A[D][C]=B}};YAHOO.Finance.Streaming.DynamicIFrame=function(B){var E=null;var D=null;var A=(B)?B:"RSIFrame";var C=function(){if(!document.createElement){return true}if(!E&&document.createElement){try{var F=document.createElement("iframe");F.setAttribute("id",A);F.style.border="0px";F.style.width="0px";F.style.height="0px";E=document.body.appendChild(F);if(document.frames){E=document.frames[A]}}catch(H){iframeHTML='<iframe id="'+A+'" style="';iframeHTML+="border:0px;";iframeHTML+="width:0px;";iframeHTML+="height:0px;";iframeHTML+="display:none;";iframeHTML+="hidden:true;";iframeHTML+='"></iframe>';document.body.innerHTML+=iframeHTML;E=new Object();E.document=new Object();E.document.location=new Object();E.document.location.iframe=document.getElementById(A);E.document.location.replace=function(I){this.iframe.src=I}}}if(navigator.userAgent.indexOf("Gecko")!=-1&&!E.contentDocument){setTimeout("createIFrame()",10);return false}try{if(E.contentDocument){D=E.contentDocument}else{if(E.contentWindow){D=E.contentWindow.document}else{if(E.document){D=E.document}else{return true}}}}catch(G){return false}return false};this.loadURL=function(G,F){if(F){document.domain=F}try{D.location.replace(G)}catch(H){try{E.location.replace(G)}catch(I){}}return false};this.destroy=function(){var F=YFS.util.$(A);if(F&&F.parentNode){F.parentNode.removeChild(F);delete (E);delete (D)}};this.destroyScriptTags=function(){if(!E){return }var H=E.contentDocument;if(!H){H=E.document}if(H){var F=H.getElementsByTagName("script");var I=F.length;var G=null;for(i=0;i<I;i++){G=F[0];G.parentNode.removeChild(G);delete (G)}}};C()};YAHOO.Finance.Streaming.events={logger:null,hasFocus:true,hasActivity_snz:false,hasActivity_ads:false,scount_snz:0,scount_ads:0,isServingAds:false,isSnoozing:false,isStreaming:true,IERecentFocusFlag:false,ignoreFakeMouseMoveCheck:false,snzTimer:null,_ns:(navigator.appName.indexOf("Netscape")!=-1),_mouseX:0,_mouseY:0,SNOOZE_CHK_INTVL:25*60,SNOOZE_CHK_SLICE:10,init:function(){this.logger=new YFS.logger("events","debug_events",10);this._initEvtHandlers();this.snzStatusCheck(this.SNOOZE_CHK_INTVL,this.SNOOZE_CHK_SLICE)},_initEvtHandlers:function(){YAHOO.util.Event.addListener(window,"error",function(A){YFS.events.handleError(A)});YAHOO.util.Event.addListener(window,"focus",function(A){YFS.events.handleFocus(A)});YAHOO.util.Event.addListener(window,"blur",function(A){YFS.events.handleFocus(A)});YAHOO.util.Event.addListener(document,"mousemove",function(A){YFS.events.handleMouseEvt(A)});YAHOO.util.Event.addListener(document,"click",function(A){YFS.events.handleMouseEvt(A)});YAHOO.util.Event.addListener(document,"keydown",function(A){YFS.events.handleKeyEvt(A)})},notify:function(A){if(A=="STREAMING_NO"){this.isStreaming=false}else{if(A=="STREAMING_YES"){this.isStreaming=true;this.snzStatusCheck(this.SNOOZE_CHK_INTVL,this.SNOOZE_CHK_SLICE)}}},handleFocus:function(B){var C=(B.type=="focus")?true:false;if(C&&!this._ns){this.IERecentFocusFlag=true;setTimeout(function(){YFS.events.IERecentFocusFlag=false},100)}if(C!=this.hasFocus){if(!C&&!this._ns){var A=YAHOO.util.Event;if(this._pointerInsideIEBrowser(A.getPageX(B),A.getPageY(B))){C=true}else{if(this.IERecentFocusFlag){C=true}}}this.hasFocus=C;this.hasActivity_snz=this.hasActivity_ads=true}},_pointerInsideIEBrowser:function(A,C){var B=document.body;if(A<B.scrollLeft+B.clientWidth&&C<B.scrollTop+B.clientHeight){return true}return false},handleMouseEvt:function(A){if(this.ignoreFakeMouseMoveCheck===false){var C=YAHOO.util.Event.getPageX(A);var B=YAHOO.util.Event.getPageY(A);if(C==this._mouseX&&B==this._mouseY){return }this._mouseX=C;this._mouseY=B}this.hasActivity_snz=this.hasActivity_ads=true},handleKeyEvt:function(B){this.hasActivity_snz=this.hasActivity_ads=true;var A=B.keyCode;if(A==27){YFS.frontend.onoff.turnOff();YAHOO.util.Event.stopEvent(B)}},snzStatusCheck:function(B,C){if(this.snzTimer){clearTimeout(this.snzTimer)}if(YFS.params.vcr_params.r&&YFS.params.vcr_params.r=="1"){return }if(!this.isStreaming&&!this.isSnoozing){return }var A=Math.floor(B/C);if(this.hasFocus&&this.hasActivity_snz){this.scount_snz=0;if(this.isSnoozing){this.isSnoozing=false;YFS.frontend.toggleStreaming({shutdown:false});return }}else{if(!this.isSnoozing){this.scount_snz++;if(this.scount_snz==A){this.scount_snz=0;YFS.frontend.toggleStreaming({shutdown:true});this.isSnoozing=true}}}this.hasActivity_snz=false;this.snzTimer=setTimeout(function(){YFS.events.snzStatusCheck(B,C)},1000*C)},handleError:function(A){return true}};YAHOO.Finance.Streaming.markettime=function(){var A=null;var B=function(){if(A){clearTimeout(A);A=null}};return{logger:null,localTimezoneOffset:null,init:function(){this.logger=new YFS.logger("markettime","debug_market_time",8);this.localTimezoneOffset=(new Date()).getTimezoneOffset();var F=new Date();var K=F.getTimezoneOffset();var H=F.getFullYear();F.setFullYear(H,0,1);var J=F.getTimezoneOffset();F.setFullYear(H,2,15);var E=F.getTimezoneOffset();var D=(J!=E);F.setFullYear(H,4,1);var I=F.getTimezoneOffset();var C=(K==E);var G=(K==I);if((D&&!C)||(!D&&!G)){if(YFS.params.vcr_params.market.TZOFFSET*1===-14400){this.localTimezoneOffset-=60}}},notify:function(C){if(C=="STREAMING_NO"){B()}},updateDisplay:function(E){B();if(!E){return }var D=E.unixtime;var C=D%60;var F=60-C;E.unixtime=D-C;YFS.frontend.updateMarketTime(E,YFS.params.vcr_params.market);A=setTimeout(function(){YFS.markettime.updateDisplay({unixtime:D+F})},1000*F)}}}();YAHOO.Finance.Streaming.params=function(){var _logger=null;return{vcr_params:{s:"yhoo",k:"l10",o:"^dji",j:"p20",version:"1.0",r:"0",market:{ID:"us_market",NAME:"U.S.",TZ:"ET",TZOFFSET:"-18000"},arrowAsChangeSign:true,throttleInterval:"500",STREAMER_SERVER:"http://streamerapi.finance.yahoo.com",MARKETOPENCHECK:"180"},init:function(){_logger=new YFS.logger("params","debug_params",5);if(YFS.util.$("yfs_params_vcr")){this.pickParamsFromHtml(this.vcr_params,"yfs_params_vcr")}else{var el=YAHOO.util.Dom.get("yfs_common_params");if(el){this.pickParamsFromHtml(this.vcr_params,el)}var i=0;while(el=YAHOO.util.Dom.get("yfs_module_params_"+i)){this.pickParamsFromHtml(this.vcr_params,el,{append:true,appendDelim:","});i++}}this.augmentExtraParams()},pickParamsFromHtml:function(bag,anchor,appender){var el=anchor;if(typeof anchor==="string"){el=YFS.util.$(anchor)}if(!el){return }var p=eval("("+el.innerHTML+")");for(var key in p){if(appender&&appender.append===true){if(typeof bag[key]==="undefined"||!bag[key]){bag[key]=p[key]}else{if(!YFS.util.isEmpty(p[key])){bag[key]+=appender.appendDelim+p[key]}}}else{bag[key]=p[key]}}},augmentExtraParams:function(){var prf=YAHOO.Finance.Cookie.getObj("PRF");if(!prf||!prf.t){return }var t=prf.t;if(t&&t!==""){t=YFS.util.trim(t).toLowerCase().replace(/\+/g,",");if(this.vcr_params.o!==""){this.vcr_params.o+=","}this.vcr_params.o+=t}}}}();YFS.vcr={params:null,sh_push:false,streamerIframe:null,_evtListeners:[],domain:"finance.yahoo.com",init:function(){this.initLoggers();this.params=YFS.params.vcr_params;this.checkParams();this.throttleManager=new YFS.vcr.ThrottleManager({bufs:[new YFS.vcr.ThrottleBuffer(0),new YFS.vcr.ThrottleBuffer(1)],intvl:parseInt(YFS.params.vcr_params.throttleInterval)});this._addEventListener(YFS.events);this._addEventListener(YFS.markettime);this._addEventListener(this.throttleManager);YFS.frontend.toggleStreaming({shutdown:YFS.util.cookieMgr.existsInCookie("PRF","sq=0")})},_addEventListener:function(A){if(A){this._evtListeners.push(A)}},_notifyListeners:function(C){for(var A in this._evtListeners){var B=this._evtListeners[A];if(B.notify){B.notify(C)}}},logger:null,logger_c2s:null,logger_s2c:null,initLoggers:function(){this.logger=new YFS.logger("vcr","debug_vcr",15);this.logger_c2s=new YFS.logger("vcr_c2s","debug_vcr_c2s",1);this.logger_s2c=new YFS.logger("vcr_s2c","debug_vcr_s2c",1)},checkParams:function(){if(!this.params){this.shutdownStreaming();return }if(!this.params.s&&this.params.o){this.params.s=this.params.o;this.params.k=this.params.j;this.params.o=this.params.j=null}var A=["s","k","o","j"];for(var B in A){if(this.params[A[B]]){this.params[A[B]]=this.params[A[B]].replace(/ /g,"");this.params[A[B]]=YFS.util.removeDuplicates(this.params[A[B]],",")}}for(var C in YFS.portfolio.currencySet){if(this.params.s){this.params.s+=","}this.params.s+=C+"=X"}},startStreaming:function(){var A=this.makeRequestUrl();this.sh_push=false;if(!this.streamerIframe){this.streamerIframe=new YFS.DynamicIFrame()}this.streamerIframe.loadURL(A,this.domain);setTimeout(function(){YFS.vcr.throbbingStopper.stopThrobbing()},2000);this._notifyListeners("STREAMING_YES")},makeRequestUrl:function(){reqUrl_prefix=this.params.STREAMER_SERVER+"/streamer";var A=reqUrl_prefix+"/"+this.params.version+"?s="+this.params.s.toUpperCase();if(this.params.o){A+="&o="+this.params.o.toUpperCase()}var C=["k","j","r"];for(var B in C){var D=C[B];if(this.params[D]){A+="&"+D+"="+this.params[D]}}A+="&marketid="+YFS.params.vcr_params.market.ID;A+="&callback=parent.yfs_u1f&mktmcb=parent.yfs_mktmcb&gencallback=parent.yfs_gencb";return A},shutdownStreaming:function(){this.sh_push=true;if(this.streamerIframe){this.streamerIframe.loadURL("about:blank",this.domain)}this._notifyListeners("STREAMING_NO")},isStreaming:function(){return(!this.sh_push)},pushFrameCount:0,throbbingStopped:false,updateOneFrame:function(A){window.status="Done";if(!this.throbbingStopped){setTimeout(function(){YFS.vcr.throbbingStopper.stopThrobbing()},100);this.throbbingStopped=true}this.throttleManager.startThrottleIfStopped();for(var B in A){A[B].ticker=B;this.throttleManager.getCurrBuf().add(B,A[B])}if(this.pushFrameCount++>=1000){this.streamerIframe.destroyScriptTags();this.pushFrameCount=0}},streamingDataListeners:[],addStreamingDataListener:function(A){if(A&&typeof (A)==="function"){this.streamingDataListeners.push(A)}}};YFS.vcr.ThrottleManager=function(B){var H=B.bufs;var A=0;var E=null;var I=(B.intvl)?B.intvl:500;this.getCurrBuf=function(){return H[A]};var C=function(){return H[(A+1)%2]};var G=function(){A=(A+1)%2};var F=function(){var J=C();J.sendToDisplay()};this.startThrottleIfStopped=function(){if(E){return }this.startThrottle()};this.startThrottle=function(){if(E){clearInterval(E)}E=setInterval(function(){if(H[A].size()>0){G();F()}else{D()}},I)};this.stopThrottle=function(){if(E){clearInterval(E);E=null}};var D=this.stopThrottle;this.notify=function(J){if(J=="STREAMING_NO"){this.stopThrottle()}else{if(J=="STREAMING_YES"){this.startThrottle()}}}};YFS.vcr.ThrottleBuffer=function(B){var D=B;var A=0;var C={};this.add=function(G,F){if(!C[G]){A++;C[G]={}}for(var E in F){C[G][E]=F[E]}};this.size=function(){return A};this.sendToDisplay=function(){for(var E in C){YFS.frontend.updateOneTicker(C[E]);delete (C[E]);A--}};this.toString=function(){return("throttlebuf id:"+D+", size: "+A+", data: "+toJsonString(C))}};YFS.vcr.throbbingStopper={throbbingStopperIframe:null,stopThrobbing:function(){if(!this.throbbingStopperIframe){this.throbbingStopperIframe=new YFS.DynamicIFrame()}this.throbbingStopperIframe.loadURL("about:blank",this.domain)}};yfs_u1f=function(B){YFS.vcr.updateOneFrame(B);for(var A in YFS.vcr.streamingDataListeners){YFS.vcr.streamingDataListeners[A](B)}};yfs_mktmcb=function(A){var B=YFS.params.vcr_params.market;if(A.open&&A.close){B.open=A.open;B.close=A.close}if(A.unixtime){YFS.markettime.updateDisplay({unixtime:A.unixtime})}};yfs_gencb=function(B,A){if(B=="reload"){window.location.reload(true)}else{if(B=="reconnect"){YFS.vcr.shutdownStreaming();YFS.vcr.startStreaming()}}};YAHOO.Finance.Streaming.frontend={ICON_UP:"<img width='10' height='14' border='0' src='http://us.i1.yimg.com/us.yimg.com/i/us/fi/03rd/up_g.gif' alt='Up'>",ICON_DN:"<img width='10' height='14' border='0' src='http://us.i1.yimg.com/us.yimg.com/i/us/fi/03rd/down_r.gif' alt='Down'>",CHG_UP_CLASS:"sq_change_up",CHG_DOWN_CLASS:"sq_change_down",flashingDatums:"l10,lt0,lt1,l90,c10,c81,c60,p20,pp0,c82,pp1,p40,pp2,a00,b00,b20,b30,wa1,wp1,wa4,wp4,g40,ga1,gp1,g60,ga5,gp5,v10,v70,lt2,l84,c63,p43,c85,c86,l86,c64,p44",dCache:null,elemHash:null,switches:["yfs_wthis","yfs_onoff"],init:function(){this.dCache=new YFS.DataCache();this.elemHash=new YFS.util.ElementHash("span","id","yfs_");this.trimDatumList("k");this.trimDatumList("j");for(var A in this.switches){var B=YFS.util.$(this.switches[A]);if(B&&B.style){B.style.display=""}}},trimDatumList:function(F){if(YFS.util.isEmpty(YFS.params.vcr_params[F])){return }var B=YFS.params.vcr_params[F].split(/,/);var E=[];for(var D in B){var A=B[D];if(typeof YFS.portfolio.neededStreamingDatums[A]!=="undefined"){E.push(A)}else{if(this.elemHash.existsPrefix("yfs_"+A+"_")){E.push(A)}else{if(typeof this.disp.datum_map[A]!=="undefined"){var C=this.disp.datum_map[A];for(var D in C){if(this.elemHash.existsPrefix("yfs_"+C[D]+"_")){E.push(A);break}}}}}}YFS.params.vcr_params[F]=E.join(",")},log:function(B,A){YAHOO.log(B,A,"frontend")},updateOneTicker:function(A){var D=A.ticker;D=D.toLowerCase();for(var B in A){var C=A[B];if(!C){continue}switch(B){case"ticker":break;case"a00":case"b00":case"g00":case"h00":case"j10":case"v00":case"a50":case"b60":case"b30":case"o50":case"z03":case"z04":case"b20":case"o40":case"z05":case"z07":case"h01":case"g01":case"h02":case"g11":this.updateElem(D,B,C,"asIs");break;case"t10":case"t50":case"t51":case"t53":case"t54":this.updateElem(D,B,C,"unixtimeToMkttz");break;case"l10":case"l90":case"l91":case"l84":case"l86":this.updateElem(D,B,this.formatNumberInsertCommas(C,true),"asIs");this.updateDispDatums(D,B,C);if(B=="l10"){this.updatePageTitle(D,B,C)}break;case"c10":case"c81":case"c60":case"z02":case"z08":case"c63":case"c85":case"c64":this.updateElem(D,B,C,"arrowColorAbs",{nodecimalformat:true});if(B=="c10"){this.updatePageTitle(D,B,C)}break;case"p20":case"c82":case"p40":case"p41":case"z09":case"p43":case"c86":case"p44":this.updateElem(D,B,C,"parensColorAbsPercent");this.updateDispDatums(D,B,C);if(B=="p20"){this.updatePageTitle(D,B,C)}break}}YFS.portfolio.updateOneTicker(A)},disp:{datum_map:{p20:["pp0"],p40:["pp2"],c82:["pp1"],l10:["lt0","lt1"]},options:{pp0:"arrowColorAbsPercent",pp1:"arrowColorAbsPercent",pp2:"arrowColorAbsPercent",lt0:"mul1000",lt1:"div10"}},updateDispDatums:function(G,B,E){var A=this.disp.datum_map[B];if(!A||!A.length){return }var F=A.length;for(var D=0;D<F;D++){var C=this.disp.options[A[D]];if(C){this.updateElem(G,A[D],E,C)}}},pageTitleParams:{isComplete:function(){if(!this.l10||!this.c10||!this.p20){return false}return true},getLCP:function(){return this.l10+" "+this.c10+" ("+this.p20+"%)"}},updatePageTitle:function(E,C,B){if(!YFS.params.vcr_params.SINGLE_QUOTE_PAGE){return }var A=YFS.params.vcr_params.SINGLE_QUOTE_PAGE.symbol;var D=YFS.params.vcr_params.SINGLE_QUOTE_PAGE.name;if(A.toLowerCase()===E){this.pageTitleParams[C]=B}else{return }if(this.pageTitleParams.isComplete()){document.title=A+": "+this.pageTitleParams.getLCP()+" : "+D+" - Yahoo! Finance"}},updateElem:function(J,D,B,H,L){var C,E=1;var A="yfs_"+D+"_"+J;var G="";var I=this.dCache.get(J,D);while((C=this.elemHash.getElemForUniqueAttr(G=A+"_"+E++))){if(YAHOO.util.Dom.hasClass(C,"streaming-inactive")){continue}var K=this.renderFuncLib[H];var F="";if(B==null||YFS.util.isInvalidNumber(B)){F="-"}else{if(B.toLowerCase()=="n/a"){F="N/A"}else{F=K?K(B,L):B}}C.innerHTML=F;if(this.flashingDatums.indexOf(D.substring(0,3))!=-1){this.highlightValueChange(G,I,B)}}this.dCache.put(J,D,B)},POSITIVE_HIGHLIGHT_COLOR_CLASS:"sq_highlight_up",NEGATIVE_HIGHLIGHT_COLOR_CLASS:"sq_highlight_down",HIGHLIGHT_INTVL:500,highlightValueChange:function(A,C,D){if(C==null||D==null||C==D){return }var B=this.elemHash.getElemForUniqueAttr(A);C=parseFloat(C.toString().replace(/,/g,""));D=parseFloat(D.toString().replace(/,/g,""));if(isNaN(C)||isNaN(D)){return }var E=(D>C)?this.POSITIVE_HIGHLIGHT_COLOR_CLASS:this.NEGATIVE_HIGHLIGHT_COLOR_CLASS;YFS.webfx.highlightBG({el:B,id:A,hlclass:E,intvl:this.HIGHLIGHT_INTVL})},renderFuncLib:{asIs:function(A){return A},appendCurrency:function(B,A){return YFS.frontend.addCurrency(YFS.frontend.formatNumber(B,true),(A?A.currency:null))},arrowColorAbs:function(E,D){var C=YFS.frontend.getChangeIcon(E);var F=YFS.frontend.signMap[YFS.frontend.getSign(E)];var A=(D&&D.nodecimalformat)?YFS.frontend.formatNumberInsertCommas(E,true):YFS.frontend.formatNumber(E,true);var B="";if(YFS.params.vcr_params.arrowAsChangeSign){B=C+' <span class="'+YFS.frontend.getChangeColorClass(E)+'">'+YFS.frontend.addCurrency(YFS.frontend.getAbs(A),(D?D.currency:null))+"</span>"}else{B='<span class="'+YFS.frontend.getChangeColorClass(E)+'">'+F+YFS.frontend.addCurrency(YFS.frontend.getAbs(A),(D?D.currency:null))+"</span>"}return B},arrowColorAbsPercent:function(C){var B=YFS.frontend.getChangeIcon(C);var D=YFS.frontend.signMap[YFS.frontend.getSign(C)];var A="";if(YFS.params.vcr_params.arrowAsChangeSign){A=B+' <span class="'+YFS.frontend.getChangeColorClass(C)+'">'+YFS.frontend.getAbs(C)+"%</span>"}else{A='<span class="'+YFS.frontend.getChangeColorClass(C)+'">'+D+YFS.frontend.getAbs(C)+"%</span>"}return A},parensColorAbsPercent:function(A){return'<span class="'+YFS.frontend.getChangeColorClass(A)+'">('+YFS.frontend.getAbs(A)+"%)</span>"},mul1000:function(A){return YFS.frontend.formatNumber(A*1000,false)},div10:function(B){B=B.toString();var A=B/10;return A.toString().slice(0,B.length)},lastTradeBelowLow:function(A){return'v <span class="'+YFS.frontend.CHG_DOWN_CLASS+'">'+A+"</span>"},lastTradeAboveHigh:function(A){return'^ <span class="'+YFS.frontend.CHG_UP_CLASS+'">'+A+"</span>"},unixtimeToMkttz:function(D){if(D.match(/M/i)){return D}var E=new Date((D*1+YFS.markettime.localTimezoneOffset*60+YFS.params.vcr_params.market.TZOFFSET*1)*1000);var A=E.getTimezoneOffset();if(A!=YFS.markettime.localTimezoneOffset){E.setMinutes(E.getMinutes()-YFS.markettime.localTimezoneOffset+A)}var B=E.getHours();var C=(B>=12)?"PM":"AM";if(B==0){B=12}else{if(B>12){B-=12}}return B+":"+YFS.frontend.padNumber(E.getMinutes(),2)+C+" "+YFS.params.vcr_params.market.TZ}},_lhsCurrency:{USD:true,EUR:true,JPY:true,CAD:true,GBP:true,AUD:true,NZD:true,HKD:true,SGD:true,KRW:true},addCurrency:function(C,A){if(A&&A.code){var B=A.sym;if(!B){B=A.code}if(this._lhsCurrency[A.code]){C=B+C}else{C+=" "+B}}return C},formatNumber:function(G,A){G=G.toString().replace(/\,/g,"");if(isNaN(G)){G=0}var D=(G>=0);G=Math.abs(G);var I=Math.floor(G).toString();var B=2;if(I==0&&(Math.floor(G*10000+0.5)%100)!=0){B=4}var E=(B==2)?100:10000;var H=(B==2)?"00":"0000";var C=Math.floor(G*E+0.5)%E;if(C<(E/10)){C=H.substring(C.toString().length)+C}for(var F=0;F<Math.floor((I.length-(F+1))/3);F++){I=I.substring(0,I.length-(4*F+3))+","+I.substring(I.length-(4*F+3))}return(((D)?"":"-")+I+((!A)?"":"."+C))},formatNumberInsertCommas:function(E,G){E=E.toString().replace(/\,/g,"");if(isNaN(E)){return"0"}var B=(E>=0);var C=E.indexOf(".");var A=Math.floor(Math.abs(E)).toString();var D="";if(C!=-1){D=E.substr(C);if(D==="."){D=""}}for(var F=0;F<Math.floor((A.length-(F+1))/3);F++){A=A.substring(0,A.length-(4*F+3))+","+A.substring(A.length-(4*F+3))}return(((B)?"":"-")+A+((!G)?"":D))},padNumber:function(B,A){B=B.toString();while(B.length<A){B="0"+B}return B},getAbs:function(B){B=B.toString();var A=B.substring(0,1);if(A=="-"||A=="+"){B=B.substring(1,B.length)}return B},getChangeColorClass:function(A){switch(this.getSign(A)){case -1:return this.CHG_DOWN_CLASS;case 1:return this.CHG_UP_CLASS;default:return""}},getChangeIcon:function(A){switch(this.getSign(A)){case -1:return this.ICON_DN;case 1:return this.ICON_UP;default:return""}},getSign:function(B){if(B==null){return 0}if(B<0){return -1}else{if(B>0){return 1}else{var A=B.toString().substring(0,1);if(A==="+"){return 1}else{if(A==="-"){return -1}else{return 0}}}}},signMap:{"-1":"-","1":"+","0":""},timeUtil:{dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthOfYear:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],getCountdownString:function(D){if(D<=0){return""}var B=Math.floor(D/3600);var A=Math.floor((D-B*3600)/60);var C=" in ";C+=(B)?B+((B>1)?"hrs":"hr"):"";C+=(A)?((B)?" ":"")+A+((A>1)?"mins":"min"):"";return C}},updateMarketTime:function(G,E){var J=G.unixtime;if(!J||!E){return }if(typeof (E.flags.h)!="undefined"){if(!E.open){E.open=J-1}if(!E.close){E.close=J-1}}var B=new Date((J+YFS.markettime.localTimezoneOffset*60+E.TZOFFSET*1)*1000);this.log("date: "+B);var C=B.getTimezoneOffset();if(C!=YFS.markettime.localTimezoneOffset){B.setMinutes(B.getMinutes()-YFS.markettime.localTimezoneOffset+C)}var A=(J<E.open&&J>=E.open-YFS.params.vcr_params.MARKETOPENCHECK*60)?"WILL_OPEN":(J>=E.open&&J<E.close)?"WILL_CLOSE":"CLOSED";var L=(A=="WILL_OPEN")?E.open-J:E.close-J;var M=(A=="WILL_OPEN")?" open":(A=="WILL_CLOSE")?" close":" closed";var I=E.flags;var H="";if(I&&(A=="WILL_OPEN")){if(typeof I.oe!="undefined"){M+=" early";H=I.oe}else{if(typeof I.ol!="undefined"){M+=" late";H=I.ol}}}else{if(I&&(A=="WILL_CLOSE")){if(typeof I.ce!="undefined"){M+=" early";H=I.ce}else{if(typeof I.cl!="undefined"){M+=" late";H=I.cl}}}else{if(I&&(A=="CLOSED")){if(typeof I.h!="undefined"){H=I.h}}}}if(H!=""){H=" for "+H}var D=B.getHours();var K=(D>=12)?"PM":"AM";if(D==0){D=12}else{if(D>12){D-=12}}var F=YFS.util.$("yfs_market_time");if(!F){return }F.innerHTML=this.timeUtil.dayOfWeek[B.getDay()]+", "+this.timeUtil.monthOfYear[B.getMonth()]+" "+B.getDate()+", "+B.getFullYear()+", "+D+":"+this.padNumber(B.getMinutes(),2)+K+" "+E.TZ+" - <b>"+E.NAME+" Markets"+M+((A!="CLOSED")?this.timeUtil.getCountdownString(L):"")+((H)?H:"")+".</b>"},toggleStreaming:function(A){var B=YFS.util.$("yfs_onoff");var C="<span>streaming quotes: </span>";if(A.shutdown){YFS.vcr.shutdownStreaming();if(B){B.innerHTML=C+'<a class="off" href="javascript:void(0)" onclick="YAHOO.Finance.Streaming.frontend.onoff.toggleOnoffText(\'on\'); return false;">OFF</a>'}if(A.setcookie){YFS.util.cookieMgr.setInCookie("PRF","sq=0")}}else{if(B){B.innerHTML=C+'<a class="on" href="javascript:void(0)" onclick="YAHOO.Finance.Streaming.frontend.onoff.toggleOnoffText(\'off\'); return false;">ON</a>'}if(A.setcookie){YFS.util.cookieMgr.removeFromCookie("PRF","sq=0")}YFS.vcr.startStreaming()}},onoff:{toggleOnoffText:function(B,A){if(B==="on"){this.turnOn()}else{this.turnOff()}},turnOn:function(){if(!YFS.vcr.isStreaming()){YFS.frontend.toggleStreaming({shutdown:false,setcookie:true})}},turnOff:function(){if(YFS.vcr.isStreaming()){YFS.frontend.toggleStreaming({shutdown:true,setcookie:true})}}}};YAHOO.Finance.Streaming.portfolio={logger:null,pf:null,dDatums:null,_ddDepArr:{wa1:["todayBD","s80","l10","p10","v80","c30","c01","c10"],wp1:["todayBD","s80","l10","p10","v80","c30","c01","p20"],wa4:["todayBD","s80","l90","p10","c30","c60"],wp4:["todayBD","s80","l90","p10","c30","p40"],g40:["s80","l10","p10","v80","c30","c01"],ga1:["s80","l10","p10","v80","c30","c01"],gp1:["s80","l10","p10","v80","c30","c01"],g60:["s80","l90","p10","v80","c30","c01"],ga5:["s80","l90","p10","v80","c30","c01"],gp5:["s80","l90","p10","v80","c30","c01"],v10:["s80","l10","v80","c01"],v70:["s80","l90"],lt2:["l10"]},_compoundDatumMap:{w10:"wa1,wp1",w40:"wa4,wp4",g10:"ga1,gp1",g50:"ga5,gp5"},_miscDDatums:["lt2"],_dispFormatMap:{wa1:"arrowColorAbs",wp1:"arrowColorAbsPercent",wa4:"arrowColorAbs",wp4:"arrowColorAbsPercent",ga1:"arrowColorAbs",gp1:"arrowColorAbsPercent",ga5:"arrowColorAbs",gp5:"arrowColorAbsPercent",g40:"arrowColorAbs",g60:"arrowColorAbs"},currencySet:{},_defaultPC:"USD",_defaultFDs:{todayBD:"0",c01:"",s80:"0",v80:"1",p10:"0",c30:"0",l20:"0",l30:"0"},_dDatumStore:{},neededStreamingDatums:{},init:function(){this.logger=new YFS.logger("portfolio","debug_portfolio",10);this.pf=YFS.params.vcr_params.portfolio;if(!this.pf){return }if(YFS.util.isEmpty(this.pf.pc)){this.pf.pc=this._defaultPC}this._defaultFDs.c01=this.pf.pc;if(this.pf.pc!="USD"){this.currencySet[this.pf.pc]=0}this.currencySet.USD=1;for(var D in this._compoundDatumMap){if(this._compoundDatumMap[D]){this.pf.dd=this.pf.dd.replace(D,this._compoundDatumMap[D])}}this.dDatums=this.pf.dd.replace(/ /g,"").split(",");for(var G in this._miscDDatums){this.dDatums.push(this._miscDDatums[G])}for(var G in this.dDatums){var F=this.dDatums[G];var L=this._ddDepArr[F];for(var E in L){var I=L[E];if(typeof this._defaultFDs[I]==="undefined"){this.neededStreamingDatums[I]=true}}}var C=this.pf.fd;for(var G in C.txns){var M=C.txns[G].s;if(!C[M]){C[M]={};C[M].txns=[]}C[M].txns.push(C.txns[G])}for(var M in C){for(var E in C[M].txns){for(var D in this._defaultFDs){if(YFS.util.isEmpty(C[M].txns[E][D])){C[M].txns[E][D]=this._defaultFDs[D]}}var J=C[M].txns[E].c01.toUpperCase();if(J!="USD"){this.currencySet[J]=0}}}this.logger.debug("currencySet: "+toJsonString(this.currencySet));this.logger.debug("portfolio: "+toJsonString(this.pf));var H=document.getElementsByTagName("span");for(var G=0;G<H.length;G++){var B=H[G];var A=B.getAttribute("id");if(A&&A.match("yfs_")&&A.match("_raw")){var K=parseFloat(B.innerHTML.replace(/,/g,""));if(!isNaN(K)){this._dDatumStore[A]=K}}}},ddCalculable:function(A,B,D){if(!B||!D){return false}var E=this._ddDepArr[A];if(!E){return false}for(var C in E){if(YFS.util.isEmpty(B[E[C]])&&YFS.util.isEmpty(D[E[C]])){return false}}return true},getQpRatio:function(A,B){if(A==B){return 1}else{if(this.currencySet[A]==0||this.currencySet[B]==0){return null}else{var C=this.currencySet[A]/this.currencySet[B];return C}}},ddCalculate:{wa1:function(D,C,E){var A;var B=YFS.portfolio.getQpRatio(D,C.c01);if(!B){return null}if(C.todayBD=="1"&&C.p10>0){A=C.s80*(E.l10-C.p10)*B*C.v80-C.c30}else{A=C.s80*E.c10*B*C.v80}return A},wp1:function(C,B,D){var E;var A=YFS.portfolio.getQpRatio(C,B.c01);if(!A){return null}if(B.todayBD=="1"&&B.p10>0){E=100*(B.s80*(D.l10-B.p10)*A*B.v80-B.c30)/(B.s80*B.p10*A*B.v80+B.c30*1)}else{E=D.p20}return E},wa4:function(C,B,D){var A;if(B.todayBD=="1"&&B.p10>0){A=B.s80*(D.l90-B.p10)-B.c30}else{A=B.s80*D.c60}return A},wp4:function(B,A,C){var D;if(A.todayBD=="1"&&A.p10>0){D=100*(A.s80*(C.l90-A.p10)-A.c30)/(A.s80*A.p10+A.c30*1)}else{D=C.p40}return D},g40:function(D,C,E){var A=YFS.portfolio.getQpRatio(D,C.c01);if(!A){return null}if(C.p10==0){return null}var B=(C.s80*(E.l10-C.p10)*A*C.v80)-C.c30;return B},ga1:function(C,B,D){var A=YFS.portfolio.ddCalculate.g40(C,B,D);return A},gp1:function(C,B,D){var A=YFS.portfolio.getQpRatio(C,B.c01);if(!A){return null}if(B.p10==0){return null}var E=100*(B.s80*(D.l10-B.p10)*A*B.v80-B.c30)/(B.s80*B.p10*A*B.v80+B.c30*1);return E},g60:function(D,C,E){var A=YFS.portfolio.getQpRatio(D,C.c01);if(!A){return null}if(C.p10==0){return null}var B=(C.s80*(E.l90-C.p10)*A*C.v80)-C.c30;return B},ga5:function(C,B,D){var A=YFS.portfolio.ddCalculate.g60(C,B,D);return A},gp5:function(B,A,C){if(A.p10==0){return null}var D=100*(A.s80*(C.l90-A.p10)-A.c30)/(A.s80*A.p10+A.c30*1);return D},v10:function(D,C,E){var A=YFS.portfolio.getQpRatio(D,C.c01);if(!A){return null}var B=C.s80*E.l10*A*C.v80;return B},v70:function(C,B,D){var A=B.s80*D.l90;return A},lt2:function(B,A,C){return C.l10}},updateOneTicker:function(C){if(!this.pf||!this.dDatums){return }var J=C.ticker;var F=J.toUpperCase();var N=J.toLowerCase();var G=F.indexOf("=");if((F!="USD=X")&&(G!=-1)&&(C.l10!=null)){var L=parseFloat(C.l10);if(isNaN(L)){L=0}this.currencySet[F.substring(0,G)]=L}if(G!=-1){return }var A=this.pf.fd;if(!A[F]){return }for(var D in this.dDatums){var K=this.dDatums[D];for(var B in A[F].txns){var E=A[F].txns[B];var H=this.ddCalculable(K,E,C);if(H){var I=this.ddCalculate[K];if(!I){continue}var L=I(this.pf.pc,E,C);if(L==null||YFS.util.isInvalidNumber(L)){YFS.frontend.updateElem(N,K,L);continue}var M=this._dispFormatMap[K];if(!M&&K==="lt2"){if(E.l30>0&&C.l10<E.l30*1){M="lastTradeBelowLow"}else{if(E.l20>0&&C.l10>E.l20*1){M="lastTradeAboveHigh"}else{M="asIs"}}}if(!M){M="appendCurrency"}this._updatePfElem(N,K+"_t"+B,L,M,{code:this.pf.pc,sym:this.pf.pcs});this._dDatumStore["yfs_"+K+"_t"+B+"_"+N+"_raw"]=L;this.updateColTotals(K,M)}}}},updateColTotals:function(H,I){if(H=="wp1"||H=="wp4"||H=="gp1"||H=="gp5"){}else{var E=this._getSumOverAllTickers(H);this._updatePfElem("pf_total",H,E,I,{code:this.pf.pc,sym:this.pf.pcs});this._dDatumStore["yfs_"+H+"_pf_total_raw"]=E}if(H=="wa1"||H=="v10"){var A=this._dDatumStore.yfs_wa1_pf_total_raw;var C=(100*A)/(this._dDatumStore.yfs_v10_pf_total_raw-A);this._updatePfElem("pf_total","wp1",C,"arrowColorAbsPercent")}if(H=="wa4"||H=="v70"){var F=this._dDatumStore.yfs_wa4_pf_total_raw;var B=(100*F)/(this._dDatumStore.yfs_v70_pf_total_raw-F);this._updatePfElem("pf_total","wp4",B,"arrowColorAbsPercent")}if(H=="ga1"||H=="v10"){var J=this._calculateTotalBasis();if(!J){return }var G=(100*this._dDatumStore.yfs_ga1_pf_total_raw)/J;this._updatePfElem("pf_total","gp1",G,"arrowColorAbsPercent")}if(H=="ga5"||H=="v70"){var J=this._calculateTotalBasis(true);if(!J){return }var D=(100*this._dDatumStore.yfs_ga5_pf_total_raw)/J;this._updatePfElem("pf_total","gp5",D,"arrowColorAbsPercent")}},_calculateTotalBasis:function(F){var E=this.pf.fd;var B=0;for(var D in E.txns){var C=E.txns[D];if(C.s.indexOf("$$")!=-1){continue}var A=YFS.portfolio.getQpRatio(this.pf.pc,C.c01);if(F){if(C.p10>0){B+=C.s80*C.p10+C.c30*1}}else{if(A==null){return 0}if(C.p10>0){B+=C.s80*C.p10*A*C.v80+C.c30*1}}}return B},_getSumOverAllTickers:function(A,D){var C=0;for(var B in this._dDatumStore){if(B.match("yfs_"+A)&&!B.match("pf_total")){var E=parseFloat(this._dDatumStore[B]);if(isNaN(E)){continue}if(typeof (D)=="function"){E=D(E)}C+=E}}return C},_updatePfElem:function(E,D,C,B,A){if(C!=null){if(typeof (C)=="string"){C=parseFloat(C)}if(!YFS.util.isInvalidNumber(C)){C=C.toFixed(2)}}YFS.frontend.updateElem(E,D,C,B,{currency:A})}};YAHOO.Finance.Streaming.webfx={highlightTimerMap:{},highlightBG:function(A){if(this.highlightTimerMap[A.id]){clearTimeout(this.highlightTimerMap[A.id]);this.highlightTimerMap[A.id]=null}if(A.reset){YAHOO.util.Dom.removeClass(A.el,YFS.frontend.POSITIVE_HIGHLIGHT_COLOR_CLASS);YAHOO.util.Dom.removeClass(A.el,YFS.frontend.NEGATIVE_HIGHLIGHT_COLOR_CLASS);return }else{YAHOO.util.Dom.addClass(A.el,A.hlclass);this.highlightTimerMap[A.id]=setTimeout(function(){YFS.webfx.highlightBG({el:A.el,id:A.id,hlclass:A.hlclass,reset:true,intvl:A.intvl})},A.intvl)}}};YAHOO.Finance.Streaming.util={init:function(){this.ylogger.init()},ylogger:{logReader:null,init:function(){if(YAHOO.widget.LogReader){var A={width:"50em",height:"25em",fontSize:"80%",newestOnTop:false,verboseOutput:false};this.logReader=new YAHOO.widget.LogReader(null,A);this.logReader.hide();if(window.location.href.match("shield")){this.logReader.show()}}}},$:YAHOO.util.Dom.get,log:function(B,A){YAHOO.log(B,A,"util")},isEmpty:function(A){if(!A||A===""){return true}return false},trim:function(A){if(!A){return""}return A.replace(/^\s+|\s+$/g,"")},removeDuplicates:function(G,F){if(!G||!F){return null}var A=G.split(F);var E={};for(var C in A){E[A[C]]=true}var B=[];for(var D in E){B.push(D)}return B.join(F)},ScriptLoader:function(){this.eltScript=null;this.loadSingleUseJSONScript=function(A){if(this.eltScript){this.eltScript.parentNode.removeChild(this.eltScript);this.eltScript=null}this.eltScript=this.loadScript(A,true)};this.loadScript=function(A,C){if(!A){return null}var B=document.createElement("script");B.setAttribute("type","text/javascript");if(C){if(A.indexOf("?")>-1){A+="&"}else{A+="?"}A+="rand="+Math.random()}B.setAttribute("src",A);document.getElementsByTagName("head")[0].appendChild(B);return B}},getCurrTimeStamp:function(){var B=new Date();var A=B.getHours()*3600+B.getMinutes()*60+B.getSeconds()+B.getMilliseconds()/1000;return A},cookieMgr:{EXPIRES_DAYS:3650,setInCookie:function(B,C){var A=this._readCookie(B);YFS.util.log("key: "+B+", v: "+A);if(!A){A=C}else{if(A.indexOf(C)==-1){A=C+"&"+A}}YFS.util.log("key: "+B+", v: "+A);this._createCookie(B,A,this.EXPIRES_DAYS)},removeFromCookie:function(C,D){var A=this._readCookie(C);YFS.util.log("key: "+C+", v: "+A);if(!A||A.indexOf(D)==-1){return }var B=A.indexOf(D);A=A.substring(0,B)+A.substring(B+D.length);B=A.indexOf("&&");if(B!=-1){A=A.substring(0,B)+A.substring(B+1)}if(A[A.length-1]=="&"){A=A.substring(0,A.length-1)}if(A[0]=="&"){A=A.substring(1)}YFS.util.log("key: "+C+", v: "+A);this._createCookie(C,A,this.EXPIRES_DAYS)},existsInCookie:function(B,C){var A=this._readCookie(B);return(A&&A.indexOf(C)!=-1)},_readCookie:function(C){var E=C+"=";var A=document.cookie.split(";");for(var B=0;B<A.length;B++){var D=A[B];while(D.charAt(0)==" "){D=D.substring(1,D.length)}if(D.indexOf(E)===0){return D.substring(E.length,D.length)}}return null},_createCookie:function(C,E,F){var A="";if(F){var B=new Date();B.setTime(B.getTime()+(F*24*60*60*1000));A="; expires="+B.toGMTString()}var D="; domain=finance.yahoo.com";document.cookie=C+"="+E+A+D+"; path=/"}},pushItem:function(A,B,D){var E=YAHOO.util.Dom.getElementsByClassName(B,A);if(!E||!E.length){return }for(var C=E.length-1;C>0;C--){E[C].innerHTML=E[C-1].innerHTML}E[0].innerHTML=D},isInvalidNumber:function(A){if(typeof (A)=="number"&&(Math.abs(A)==Infinity||isNaN(A))){return true}return false}};YAHOO.Finance.Streaming.util.ElementHash=function(K,F,A){var E={};var G={};var I={};var B=function(L){if(G[L]){G[L]+=1}else{G[L]=1;I[L]=0}return L+"_"+G[L]};var J=document.getElementsByTagName(K);for(var C=0;C<J.length;C++){var H=J[C].getAttribute(F);if(H&&A&&H.length>=A.length&&H.indexOf(A)!=-1){var D=B(H);E[D]=J[C]}}this.existsPrefix=function(M){for(var L in E){if(L.indexOf(M)==0){return true}}return false};this.getElemForUniqueAttr=function(L){return E[L]};this.getRunningIndexForAttr=function(M){var L=I[M];if(L==null){return 9999}var N=L+1;I[M]=N%G[M];return N}};YAHOO.Finance.Streaming.logger=function(B,J,K){var L=true;var M=null;var H=J;var C=B;var A=(K>0)?K:1;var I=[];var N=0;var P=0;var E=99999;var G={category:true,counter:true};var F="consoletab_"+C;var D="console_"+C;var O=null;this.setEnabled=function(Q){L=Q};this.initDisplay=function(){if(!L){return }if(!M){if(!(M=YFS.util.$(H))){return }}var Q="";Q+='<div class="consoletab" id="'+F+'"><table width="100%" cellpadding="0" cellspacing="0"><tr><td>Logging console ['+C+']</td><td width="15"><a class="minimize" href="javascript:void(0)">-</a></td></tr></table></div>';Q+='<div class="console" id="'+D+'"></div>';M.innerHTML=Q;this.info("Logger initialized.");YAHOO.util.Event.addListener(F,"click",function(){this.toggleConsole()},this,true)};this.log=function(T,V){if(!L){return }if(!M){if(!(M=YFS.util.$(H))){return }this.initDisplay()}if(!O){if(!(O=YFS.util.$(D))){return }}var S="";S+=(G.category)?"["+C+"] ":"";S+=(G.counter)?"["+P+++"] ":"";if(P>=E){P=0}S+=T;var U="";U+='<table cellpadding="0" cellspacing="0" width="100%">';I[N]='<tr class="'+V+'"><td>'+S+"</td></tr>";N=(N+1)%A;for(var R=0;R<A;R++){var Q=I[(R+N)%A];if(!Q){Q="<tr><td>&nbsp;</td></tr>"}U+=Q}U+="</table>";O.innerHTML=U};this.toggleConsole=function(){var Q=YFS.util.$(D);var R=YAHOO.util.Dom.getStyle(Q,"display");if(!R){return }R=(R=="block"||R==="")?"none":"block";YAHOO.util.Dom.setStyle(Q,"display",R)};this.debug=function(Q){this.log(Q,"debug")};this.info=function(Q){this.log(Q,"info")};this.warn=function(Q){this.log(Q,"warn")};this.error=function(Q){this.log(Q,"error")};this.fatal=function(Q){this.log(Q,"fatal")};this.initDisplay()};toJsonString=function(A){return toJsonStringArray(A).join("")};toJsonStringArray=function(A,C){C=C||new Array();var B;switch(typeof A){case"object":if(A){if(A.constructor==Array){C.push("[");for(var D=0;D<A.length;++D){if(D>0){C.push(",\n")}toJsonStringArray(A[D],C)}C.push("]");return C}else{if(typeof A.toString!="undefined"){C.push("{");var F=true;for(var D in A){var E=C.length;if(!F){C.push(",\n")}toJsonStringArray(D,C);C.push(":");toJsonStringArray(A[D],C);if(C[C.length-1]==B){C.splice(E,C.length-E)}else{F=false}}C.push("}");return C}}return C}C.push("null");return C;case"unknown":case"undefined":case"function":C.push(B);return C;case"string":C.push('"');C.push(A.replace(/(["\\])/g,"\\$1").replace(/\r/g,"").replace(/\n/g,"\\n"));C.push('"');return C;default:C.push(String(A));return C}};